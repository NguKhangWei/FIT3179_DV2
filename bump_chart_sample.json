{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Simple bump chart: 3 competitors over 5 years with larger nodes",
  "width": 600,
  "height": 320,
  "data": {
    "values": [
      {"year": 2016, "competitor": "Alpha", "rank": 2},
      {"year": 2017, "competitor": "Alpha", "rank": 1},
      {"year": 2018, "competitor": "Alpha", "rank": 1},
      {"year": 2019, "competitor": "Alpha", "rank": 2},
      {"year": 2020, "competitor": "Alpha", "rank": 1},

      {"year": 2016, "competitor": "Bravo", "rank": 1},
      {"year": 2017, "competitor": "Bravo", "rank": 2},
      {"year": 2018, "competitor": "Bravo", "rank": 3},
      {"year": 2019, "competitor": "Bravo", "rank": 1},
      {"year": 2020, "competitor": "Bravo", "rank": 2},

      {"year": 2016, "competitor": "Charlie", "rank": 3},
      {"year": 2017, "competitor": "Charlie", "rank": 3},
      {"year": 2018, "competitor": "Charlie", "rank": 2},
      {"year": 2019, "competitor": "Charlie", "rank": 3},
      {"year": 2020, "competitor": "Charlie", "rank": 3}
    ]
  },

  "layer": [
    { 
      "mark": {
        "type": "line",
        "strokeWidth": 3,
        "interpolate": "linear",
        "point": {
          "filled": true,
          "size": 400,
          "shape": "circle"
        }
      },
      "encoding": {
        "x": {
          "field": "year",
          "type": "ordinal",
          "axis": {"title": "Year", "labelAngle": 0}
        },
        "y": {
          "field": "rank",
          "type": "quantitative",
          "title": "Rank (1 = best)",
          "scale": {"reverse": true, "domain": [1, 3]},
          "axis": {"tickMinStep": 1}
        },
        "color": {
          "field": "competitor",
          "type": "nominal",
          "legend": {"title": "Competitor"}
        },
        "detail": {"field": "competitor"}
      }
    },

    {
      "transform": [{"filter": "datum.year == 2020"}],
      "mark": {"type": "text", "align": "left", "baseline": "middle", "dx": 6},
      "encoding": {
        "x": {"field": "year", "type": "ordinal"},
        "y": {"field": "rank", "type": "quantitative"},
        "text": {"field": "competitor", "type": "nominal"},
        "color": {"field": "competitor", "type": "nominal"},
        "opacity": {"value": 1}
      }
    },

    {
      "transform": [{"filter": "datum.year == 2016"}],
      "mark": {"type": "text", "align": "right", "baseline": "middle", "dx": -6},
      "encoding": {
        "x": {"field": "year", "type": "ordinal"},
        "y": {"field": "rank", "type": "quantitative"},
        "text": {"field": "competitor", "type": "nominal"},
        "color": {"field": "competitor", "type": "nominal"},
        "opacity": {"value": 1}
      }
    }
  ],

  "config": {
    "axis": {"labelFontSize": 12, "titleFontSize": 13},
    "legend": {"orient": "top-left"}
  }
}
