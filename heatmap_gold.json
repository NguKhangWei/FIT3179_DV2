{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "Gold Award Ratio (Gold / All Awards) by Continent (2000–2024)",
  "width": 1100,
  "height": {"step": 20},
  "data": {
    "url": "https://raw.githubusercontent.com/NguKhangWei/FIT3179_DV2/main/data/cleaned_country_imo.csv",
    "format": {"type": "csv"}
  },
  "transform": [
    {
      "lookup": "country_new",
      "from": {
        "data": {"values": [{"country_new": "Albania", "continent": "Europe"},
          {"country_new": "Algeria", "continent": "Africa"},
          {"country_new": "Angola", "continent": "Africa"},
          {"country_new": "Argentina", "continent": "South America"},
          {"country_new": "Armenia", "continent": "Asia"},
          {"country_new": "Australia", "continent": "Oceania"},
          {"country_new": "Austria", "continent": "Europe"},
          {"country_new": "Azerbaijan", "continent": "Asia"},
          {"country_new": "Bahrain", "continent": "Asia"},
          {"country_new": "Bangladesh", "continent": "Asia"},
          {"country_new": "Belarus", "continent": "Europe"},
          {"country_new": "Belgium", "continent": "Europe"},
          {"country_new": "Benin", "continent": "Africa"},
          {"country_new": "Bhutan", "continent": "Asia"},
          {"country_new": "Bolivia", "continent": "South America"},
          {"country_new": "Bosnia and Herzegovina", "continent": "Europe"},
          {"country_new": "Botswana", "continent": "Africa"},
          {"country_new": "Brazil", "continent": "South America"},
          {"country_new": "Brunei Darussalam", "continent": "Asia"},
          {"country_new": "Bulgaria", "continent": "Europe"},
          {"country_new": "Burkina Faso", "continent": "Africa"},
          {"country_new": "Cambodia", "continent": "Asia"},
          {"country_new": "Cameroon", "continent": "Africa"},
          {"country_new": "Canada", "continent": "North America"},
          {"country_new": "Chile", "continent": "South America"},
          {"country_new": "China", "continent": "Asia"},
          {"country_new": "Colombia", "continent": "South America"},
          {"country_new": "Costa Rica", "continent": "North America"},
          {"country_new": "Croatia", "continent": "Europe"},
          {"country_new": "Cuba", "continent": "North America"},
          {"country_new": "Cyprus", "continent": "Europe"},
          {"country_new": "Czech Republic", "continent": "Europe"},
          {"country_new": "Côte d'Ivoire", "continent": "Africa"},
          {"country_new": "Denmark", "continent": "Europe"},
          {"country_new": "Dominican Republic", "continent": "North America"},
          {"country_new": "Ecuador", "continent": "South America"},
          {"country_new": "Egypt", "continent": "Africa"},
          {"country_new": "El Salvador", "continent": "North America"},
          {"country_new": "Estonia", "continent": "Europe"},
          {"country_new": "Finland", "continent": "Europe"},
          {"country_new": "France", "continent": "Europe"},
          {"country_new": "Gambia", "continent": "Africa"},
          {"country_new": "Georgia", "continent": "Asia"},
          {"country_new": "Germany", "continent": "Europe"},
          {"country_new": "Ghana", "continent": "Africa"},
          {"country_new": "Greece", "continent": "Europe"},
          {"country_new": "Guatemala", "continent": "North America"},
          {"country_new": "Honduras", "continent": "North America"},
          {"country_new": "Hong Kong", "continent": "Asia"},
          {"country_new": "Hungary", "continent": "Europe"},
          {"country_new": "Iceland", "continent": "Europe"},
          {"country_new": "India", "continent": "Asia"},
          {"country_new": "Indonesia", "continent": "Asia"},
          {"country_new": "Iran", "continent": "Asia"},
          {"country_new": "Iraq", "continent": "Asia"},
          {"country_new": "Ireland", "continent": "Europe"},
          {"country_new": "Israel", "continent": "Asia"},
          {"country_new": "Italy", "continent": "Europe"},
          {"country_new": "Jamaica", "continent": "North America"},
          {"country_new": "Japan", "continent": "Asia"},
          {"country_new": "Jordan", "continent": "Asia"},
          {"country_new": "Kazakhstan", "continent": "Asia"},
          {"country_new": "Kenya", "continent": "Africa"},
          {"country_new": "Kuwait", "continent": "Asia"},
          {"country_new": "Kyrgyzstan", "continent": "Asia"},
          {"country_new": "Latvia", "continent": "Europe"},
          {"country_new": "Lebanon", "continent": "Asia"},
          {"country_new": "Libya", "continent": "Africa"},
          {"country_new": "Liechtenstein", "continent": "Europe"},
          {"country_new": "Lithuania", "continent": "Europe"},
          {"country_new": "Luxembourg", "continent": "Europe"},
          {"country_new": "Madagascar", "continent": "Africa"},
          {"country_new": "Malaysia", "continent": "Asia"},
          {"country_new": "Mali", "continent": "Africa"},
          {"country_new": "Malta", "continent": "Europe"},
          {"country_new": "Mauritius", "continent": "Africa"},
          {"country_new": "Mexico", "continent": "North America"},
          {"country_new": "Moldova", "continent": "Europe"},
          {"country_new": "Mongolia", "continent": "Asia"},
          {"country_new": "Montenegro", "continent": "Europe"},
          {"country_new": "Morocco", "continent": "Africa"},
          {"country_new": "Mozambique", "continent": "Africa"},
          {"country_new": "Myanmar", "continent": "Asia"},
          {"country_new": "Namibia", "continent": "Africa"},
          {"country_new": "Nepal", "continent": "Asia"},
          {"country_new": "Netherlands", "continent": "Europe"},
          {"country_new": "New Zealand", "continent": "Oceania"},
          {"country_new": "Nicaragua", "continent": "North America"},
          {"country_new": "Nigeria", "continent": "Africa"},
          {"country_new": "North Korea", "continent": "Asia"},
          {"country_new": "Norway", "continent": "Europe"},
          {"country_new": "Oman", "continent": "Asia"},
          {"country_new": "Pakistan", "continent": "Asia"},
          {"country_new": "Panama", "continent": "North America"},
          {"country_new": "Paraguay", "continent": "South America"},
          {"country_new": "Peru", "continent": "South America"},
          {"country_new": "Philippines", "continent": "Asia"},
          {"country_new": "Poland", "continent": "Europe"},
          {"country_new": "Portugal", "continent": "Europe"},
          {"country_new": "Puerto Rico", "continent": "North America"},
          {"country_new": "Qatar", "continent": "Asia"},
          {"country_new": "Republic of Korea", "continent": "Asia"},
          {"country_new": "Republic of Macedonia", "continent": "Europe"},
          {"country_new": "Romania", "continent": "Europe"},
          {"country_new": "Russia", "continent": "Europe"},
          {"country_new": "Saudi Arabia", "continent": "Asia"},
          {"country_new": "Senegal", "continent": "Africa"},
          {"country_new": "Serbia", "continent": "Europe"},
          {"country_new": "Singapore", "continent": "Asia"},
          {"country_new": "Slovakia", "continent": "Europe"},
          {"country_new": "Slovenia", "continent": "Europe"},
          {"country_new": "South Africa", "continent": "Africa"},
          {"country_new": "Spain", "continent": "Europe"},
          {"country_new": "Sri Lanka", "continent": "Asia"},
          {"country_new": "Sudan", "continent": "Africa"},
          {"country_new": "Suriname", "continent": "South America"},
          {"country_new": "Swaziland", "continent": "Africa"},
          {"country_new": "Sweden", "continent": "Europe"},
          {"country_new": "Switzerland", "continent": "Europe"},
          {"country_new": "Syria", "continent": "Asia"},
          {"country_new": "Taiwan", "continent": "Asia"},
          {"country_new": "Tajikistan", "continent": "Asia"},
          {"country_new": "Tanzania", "continent": "Africa"},
          {"country_new": "Thailand", "continent": "Asia"},
          {"country_new": "Togo", "continent": "Africa"},
          {"country_new": "Trinidad and Tobago", "continent": "North America"},
          {"country_new": "Tunisia", "continent": "Africa"},
          {"country_new": "Turkey", "continent": "Asia"},
          {"country_new": "Turkmenistan", "continent": "Asia"},
          {"country_new": "Uganda", "continent": "Africa"},
          {"country_new": "Ukraine", "continent": "Europe"},
          {"country_new": "United Arab Emirates", "continent": "Asia"},
          {"country_new": "United Kingdom", "continent": "Europe"},
          {"country_new": "United States", "continent": "North America"},
          {"country_new": "Uruguay", "continent": "South America"},
          {"country_new": "Uzbekistan", "continent": "Asia"},
          {"country_new": "Venezuela", "continent": "South America"},
          {"country_new": "Vietnam", "continent": "Asia"},
          {"country_new": "Yemen", "continent": "Asia"},
          {"country_new": "Zambia", "continent": "Africa"},
          {"country_new": "Zimbabwe", "continent": "Africa"}]},
        "key": "country_new",
        "fields": ["continent"]
      }
    },
    {"filter": "datum.continent != null"},
    {"filter": "datum.continent != 'Africa'"},
    {"filter": "datum.year >= 2000 && datum.year <= 2024"},
    {
      "aggregate": [
        {"op": "sum", "field": "awards_gold", "as": "total_gold"},
        {"op": "sum", "field": "awards_silver", "as": "total_silver"},
        {"op": "sum", "field": "awards_bronze", "as": "total_bronze"},
        {"op": "sum", "field": "awards_honorable_mentions", "as": "total_hm"}
      ],
      "groupby": ["year", "continent"]
    },
    {
      "calculate": "datum.total_gold + datum.total_silver + datum.total_bronze + datum.total_hm",
      "as": "total_awards"
    },
    {
      "calculate": "datum.total_awards > 0 ? datum.total_gold / datum.total_awards : 0",
      "as": "gold_ratio"
    }
  ],
  "mark": "rect",
  "encoding": {
    "x": {
      "field": "year",
      "type": "ordinal",
      "title": "Year",
      "axis": {"labelAngle": -45}
    },
    "y": {
      "field": "continent",
      "type": "nominal",
      "title": "Continent",
      "sort": ["Asia", "Europe", "North America", "South America", "Oceania"]
    },
    "color": {
      "field": "gold_ratio",
  "type": "quantitative",
  "title": "Gold / Total Awards",
  "scale": {
    "domain": [0, 1],
    "range": ["#fbc02d", "#f57f17", "#e65100", "#4e342e"]
  }
    },
    "tooltip": [
      {"field": "year", "type": "ordinal"},
      {"field": "continent", "type": "nominal"},
      {"field": "total_gold", "type": "quantitative", "title": "Gold"},
      {"field": "total_silver", "type": "quantitative", "title": "Silver"},
      {"field": "total_bronze", "type": "quantitative", "title": "Bronze"},
      {"field": "total_hm", "type": "quantitative", "title": "Hon. Mentions"},
      {"field": "gold_ratio", "type": "quantitative", "title": "Gold Ratio", "format": ".2f"}
    ]
  }
}
